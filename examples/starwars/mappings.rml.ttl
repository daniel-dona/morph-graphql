@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix rmlc: <http://www.oeg-upm.net/ns/rmlc#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix ex: <http://www.example.com/> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
@prefix fno: <http://w3id.org/function/ontology>.
@prefix schema: <http://schema.org/>.

<TMCharacters>
	rml:logicalSource [
		rml:source  "https://raw.githubusercontent.com/fpriyatna/mapping-translator/master/examples/starwars/characters.csv";
	];

	rr:subjectMap [
		rr:template "http://starwars.mappingpedia.linkeddata.es/character/{id}";
		rr:class schema:Character
	];

	rr:predicateObjectMap [
	  rr:predicate schema:name;
	  rr:objectMap    [ rr:template "{fname} {lname}" ]
	];
	
	rr:predicateObjectMap [
	  rr:predicate schema:type;
	  rr:objectMap    [ rml:reference  "type" ]
	];
	
	rr:predicateObjectMap [
	  rr:predicate ex:belongsTo;
	  rr:objectMap    [
	    rr:parentTriplesMap <TMAppears>;
	    rr:joinCondition [
	        rmlc:child [
	            rml:reference "id"
	        ];
	        rmlc:parent [
	            rml:reference "movieid"
	        ];
	    ];
	   ];
	];
.

<TMAppears>
	rml:logicalSource [
		rml:source  "https://raw.githubusercontent.com/fpriyatna/mapping-translator/master/examples/starwars/appears.csv";
	];

	rr:subjectMap [
		rr:template "http://starwars.mappingpedia.linkeddata.es/movie/{charid}/{movieid}";
		rr:class schema:Appears
	];

	rr:predicateObjectMap [
	  rr:predicate schema:movieName;
	  rr:objectMap    [ rml:reference  "movieid" ]
	];	
.